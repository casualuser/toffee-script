{p, code_eq} = require './helper'

describe 'autocb', ->
	it 'simple', ->
		code_eq "x = (autocb)->", """
			function x(autocb) {
			  autocb();
			};

		"""

	it 'simple 2', ->
		code_eq """
			x = (autocb) ->
				y!
		""", """
			function x(autocb) {
			  var _this = this;
			  y(function(_$$_0) {
				autocb(_$$_0);
			  });
			};
		"""
	it 'simple 3', ->
		code_eq """
			x = (autocb) ->
				x = y!
		""", """
			function x(autocb) {
			  var _this = this;
			  y(function() {
				autocb(x = arguments[0]);
			  });
			};
		"""
	it 'empty return', ->
		code_eq "x = (autocb)-> return", """
			function x(autocb) {
			  return autocb();
			};
		"""
